(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,a){e.exports=a(51)},49:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(29),l=a.n(s),o=a(4),i=a(6),u=a(8),c=a(7),m=a(9),d=a(17),h=a(15),p=a(2),b=function(e){return r.a.createElement("div",{className:"message error"},e.message)},f=Object(p.b)(function(e){return{loginErrors:e.auth.loginErrors}})(function(e){var t=e.data,a=t.email,n=t.password,s=e.handleChange,l=e.handleSubmit,o=e.loginErrors;return r.a.createElement("div",{className:"form form-auth"},r.a.createElement("form",{onSubmit:l},o.map(function(e,t){return r.a.createElement(b,{key:t,message:e})}),r.a.createElement("h1",null,"Login"),r.a.createElement("label",{htmlFor:"email"},"Email")," ",r.a.createElement("br",null),r.a.createElement("input",{type:"email",id:"email",value:a,onChange:s,required:!0})," ",r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"password"},"Password")," ",r.a.createElement("br",null),r.a.createElement("input",{type:"password",id:"password",value:n,onChange:s,required:!0})," ",r.a.createElement("br",null),r.a.createElement("button",null,"Login")))}),E={LOGIN:"LOGIN",LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGIN_FAILED:"LOGIN_FAILED",LOGOUT:"LOGOUT"},g=a(12),w=[{username:"123",password:"123",email:"email1@email.com",_id:1},{username:"1234",password:"123",email:"email2@email.com",_id:2},{username:"12345",password:"123",email:"email3@email.com",_id:3},{username:"123456",password:"123",email:"email4@email.com",_id:4}],y=new Date,O=function(e){return"".concat(e.getDate(),"-").concat(e.getMonth()+1,"-").concat(e.getFullYear())},v=[{userID:1,username:"123",title:"Title1",body:"Body1",date:O(y),_id:1},{userID:1,username:"123",title:"Title2",body:"Body2",date:O(y),_id:2},{userID:2,username:"1234",title:"Title3",body:"Body3",date:O(y),_id:3},{userID:2,username:"1234",title:"Title4",body:"Body4",date:O(y),_id:4},{userID:3,username:"12345",title:"Title5",body:"Body5",date:O(y),_id:5},{userID:4,username:"123456",title:"Title6",body:"Body6",date:O(y),_id:6},{userID:1,username:"123",title:"Title7",body:"Body7",date:O(y),_id:7},{userID:3,username:"12345",title:"Title8",body:"Body8",date:O(y),_id:8}],j=new function e(){var t=this;Object(o.a)(this,e),this.getTweets=function(e){return e?t.tweets.filter(function(t){return t.username===e}):t.tweets},this.getTweet=function(e){return t.tweets.filter(function(t){return t._id===parseInt(e)})[0]},this.login=function(e){var a=e.email,n=e.password,r=t.users.find(function(e){return e.email===a});return r&&r.password===n?{status:"Login_success",userInfo:{id:r._id,username:r.username,email:r.email}}:{errors:["Could not log user in"]}},this.register=function(e){var a=e.email,n=e.username,r=e.password,s=e.passwordRepeat;if(!t.users.find(function(e){return e.email===a||e.username===n})&&r===s){var l={username:n,email:a,password:r,_id:Math.random()};return t.users.push(l),{status:"Register_success"}}return{errors:["Could not register new account"]}},this.addTweet=function(e,a,n){var r=Object(g.a)({},e,{userID:a,username:n,date:O(new Date),_id:Math.random()});return t.tweets.push(r),{msg:"Tweet was added"}},this.editTweet=function(e,a){var n=e.title,r=e.body;return t.tweets.map(function(e){return e._id===parseInt(a)&&(e.body=r,e.title=n),e}),{msg:"Tweet was updated"}},this.deleteTweet=function(e){var a=t.tweets.filter(function(t){return console.log(t._id!==e),t._id!==e});return a.length===t.tweets.length?{}:(t.tweets=a,{msg:"Tweet was deleted"})},this.tweets=v,this.users=w},C=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.handleChange=function(e){a.setState(Object(h.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.login({email:a.state.email,password:a.state.password})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.auth,t=e.isEmpty,a=e.authError;return t||a?r.a.createElement(f,{data:this.state,handleChange:this.handleChange,handleSubmit:this.handleSubmit}):r.a.createElement(d.a,{to:"/"})}}]),t}(n.Component),I=Object(p.b)(function(e){return{auth:e.auth}},{login:function(e){return function(t){t({type:"LOGIN"});var a,n,r=j.login(e);"Login_success"===r.status?t((a=r.userInfo,n=r.token,{type:"LOGIN_SUCCESS",userInfo:a,token:n})):t({type:"LOGIN_FAILED",errors:r.errors||[]})}}})(C),S=function(e){return r.a.createElement("div",{className:"message normal"},e.message)},T=function(e){var t=e.data,a=t.email,n=t.username,s=t.password,l=t.passwordRepeat,o=t.registerErrors,i=t.message,u=e.handleChange,c=e.handleSubmit;return r.a.createElement("div",{className:"form form-auth"},r.a.createElement("form",{onSubmit:c},i?r.a.createElement(S,{message:i}):"",o.map(function(e,t){return r.a.createElement(b,{key:t,message:e})}),r.a.createElement("h1",null,"Register"),r.a.createElement("label",{htmlFor:"email"},"Email")," ",r.a.createElement("br",null),r.a.createElement("input",{type:"email",id:"email",value:a,onChange:u,required:!0}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"username"},"Username")," ",r.a.createElement("br",null),r.a.createElement("input",{type:"text",id:"username",value:n,onChange:u,required:!0}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"password"},"Password")," ",r.a.createElement("br",null),r.a.createElement("input",{type:"password",id:"password",value:s,onChange:u,required:!0}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"passwordRepeat"},"Repeat password")," ",r.a.createElement("br",null),r.a.createElement("input",{type:"password",id:"passwordRepeat",value:l,onChange:u,required:!0}),r.a.createElement("br",null),r.a.createElement("button",null,"Register")))},_=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",passwordRepeat:"",email:"",registerErrors:[],message:null},a.handleChange=function(e){a.setState(Object(h.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.email,s=t.password,l=t.passwordRepeat;a.setState({message:null,registerErrors:[]});var o=j.register({username:n,email:r,password:s,passwordRepeat:l});"Register_success"===o.status?a.setState({message:"Account successfuly created",registerErrors:[],username:"",password:"",passwordRepeat:"",email:""}):a.setState({registerErrors:o.errors||["Error registering account"],message:null})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.props.auth.isEmpty?r.a.createElement(T,{data:this.state,handleChange:this.handleChange,handleSubmit:this.handleSubmit}):r.a.createElement(d.a,{to:"/"})}}]),t}(n.Component),k=Object(p.b)(function(e){return{auth:e.auth}},{})(_),D=a(3),L=function(e){return r.a.createElement("div",{className:"tweet"},r.a.createElement("h3",{className:"tweet-header"},e.data.title),r.a.createElement("p",{className:"tweet-text"},e.data.body)," ",r.a.createElement("hr",null),r.a.createElement("small",null,"by ",r.a.createElement(D.b,{to:"/profile/".concat(e.data.username)},e.data.username),", ",e.data.date.slice(0,10)),e.profileView?r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return e.edit(e.data._id)}},"Edit"),r.a.createElement("button",{onClick:function(){return e.delete(e.data._id)}},"Delete")):"")},N=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={tweets:[],error:""},a.fetchTweets=function(){var e=j.getTweets();a.setState({tweets:e})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchTweets()}},{key:"render",value:function(){var e=this.state.error,t=this.state.tweets.map(function(e){return r.a.createElement(L,{key:e._id,data:e})});return r.a.createElement("div",{className:"feed"},e||t)}}]),t}(n.Component),F=Object(p.b)(function(e){return{username:e.auth.userInfo.username}})(N),G=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={tweets:[],error:""},a.fetchTweets=function(){var e=a.props.match.params.username,t=j.getTweets(e);a.setState({tweets:t})},a.handleEdit=function(e){a.props.history.push("/edit-tweet/".concat(e))},a.handleDelete=function(e){"Tweet was deleted"===j.deleteTweet(e).msg?a.fetchTweets():a.setState({error:"Could not delete tweet"})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchTweets()}},{key:"componentDidUpdate",value:function(e){e!==this.props&&this.fetchTweets()}},{key:"render",value:function(){var e=this,t=this.state.error,a=this.state.tweets.map(function(t){return r.a.createElement(L,{key:t._id,data:t,profileView:e.props.username===t.username,edit:e.handleEdit,delete:e.handleDelete})});return r.a.createElement("div",{className:"feed"},t||a)}}]),t}(n.Component),R=Object(p.b)(function(e){return{username:e.auth.userInfo.username,id:e.auth.userInfo._id}})(G),x=function(e){var t=e.data,a=t.title,n=t.body,s=t.btnText,l=t.error,o=e.handleSubmit,i=e.handleChange;return r.a.createElement("form",{onSubmit:o},l?r.a.createElement(b,{message:l}):"",r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{id:"title",value:a,onChange:i}),r.a.createElement("label",{htmlFor:"body"},"Body"),r.a.createElement("textarea",{id:"body",value:n,onChange:i}),r.a.createElement("button",null,s||"Post"," tweet"))},A=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",body:"",error:""},a.handleChange=function(e){var t=a.state,n=t.title,r=t.body;n.length<31&&r.length<256&&a.setState(Object(h.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),"Tweet was added"===j.addTweet({title:a.state.title,body:a.state.body},a.props.id,a.props.username).msg?a.props.history.push("/profile/".concat(a.props.username)):a.setState({error:"Could not post tweet"})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.props.isEmpty&&this.props.history.push("/"),r.a.createElement(x,{data:Object(g.a)({},this.state,{btnText:"Post"}),handleChange:this.handleChange,handleSubmit:this.handleSubmit})}}]),t}(n.Component),B=Object(d.f)(Object(p.b)(function(e){return{username:e.auth.userInfo.username,isEmpty:e.auth.isEmpty,id:e.auth.userInfo._id}})(A)),U=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",body:""},a.handleChange=function(e){a.setState(Object(h.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),"Tweet was updated"===j.editTweet({title:a.state.title,body:a.state.body},a.props.match.params.id).msg?a.props.history.push("/profile/".concat(a.props.username)):a.setState({error:"Could not edit tweet"})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=j.getTweet(this.props.match.params.id);e&&e.username===this.props.username?this.setState({title:e.title,body:e.body}):this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement(x,{data:Object(g.a)({},this.state,{btnText:"Edit"}),handleChange:this.handleChange,handleSubmit:this.handleSubmit})}}]),t}(n.Component),q=Object(p.b)(function(e){return{username:e.auth.userInfo.username}})(U),M=function(){return r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/login",component:I}),r.a.createElement(d.b,{exact:!0,path:"/register",component:k}),r.a.createElement(d.b,{exact:!0,path:"/",component:F}),r.a.createElement(d.b,{exact:!0,path:"/profile/:username",component:R}),r.a.createElement(d.b,{exact:!0,path:"/add-tweet",component:B}),r.a.createElement(d.b,{exact:!0,path:"/edit-tweet/:id",component:q}))},P=Object(p.b)(function(e){return{username:e.auth.userInfo.username}},{logout:function(){return function(e){return e({type:"LOGOUT"})}}})(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(D.b,{to:"/profile/".concat(e.username)},"Profile"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(D.b,{to:"/add-tweet"},"Post tweet")),r.a.createElement("li",null,r.a.createElement("a",{href:"/",onClick:function(t){t.preventDefault(),e.logout()}},"Logout")))))}),J=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(D.b,{to:"/register"},"Register")),r.a.createElement("li",null,r.a.createElement(D.b,{to:"/login"},"Login")))},V=Object(p.b)(function(e){return{auth:e.auth}})(function(e){return r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"left"},r.a.createElement(D.b,{to:"/"},"Twitter clone")),r.a.createElement("ul",{className:"right"},e.auth.isEmpty?r.a.createElement(J,null):r.a.createElement(P,null))))}),Y=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,null),r.a.createElement("main",{className:"container"},r.a.createElement(M,null)))}}]),t}(n.Component),z=Object(d.f)(Object(p.b)(function(e){return{loginCheck:e.auth.loginCheck}},{})(Y)),H=(a(49),a(10)),K={isEmpty:!1,userInfo:{username:"123",id:1,email:"email1@email.com"},loginErrors:[],loginCheck:!0},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.LOGIN:return Object(g.a)({},e,{loginErrors:[]});case E.LOGIN_SUCCESS:return localStorage.setItem("token",t.token),Object(g.a)({},e,{userInfo:t.userInfo,loginErrors:[],isEmpty:!1});case E.LOGIN_FAILED:return Object(g.a)({},e,{userInfo:{},loginErrors:t.errors});case E.LOGOUT:return localStorage.removeItem("token"),Object(g.a)({},e,{userInfo:{},isEmpty:!0});default:return e}},W=Object(H.combineReducers)({auth:Q}),X=a(23),Z=a(32),$=Object(Z.a)({reducer:W,middleware:[X.a],devTools:!0});l.a.render(r.a.createElement(p.a,{store:$},r.a.createElement(D.a,null,r.a.createElement(z,null))),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.e609817a.chunk.js.map